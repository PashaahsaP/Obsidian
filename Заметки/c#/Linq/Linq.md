Linq(Language Integrated Query) - язык запроса(безопасный к типам) к данным.Объект данных должен реализовывать интерфейс `IEnumerable`, но также методы расширения позволяют обращаться к коллекция не реализующий интерфейс.

Главное достоинство это то что linq может работать с различными данными, убирая необходимость работать с различными api, виды Linq:
- `Linq to Object` для работы с массивами и коллекциями
- `Linq to Entites` используеться для работы с базой данных через ef core
- `Linq to XML` для работы с XML файлами
- `Linq to DataSet` при работе с объектом dataSet
- `Parallel Linq(PLINQ)` для создания параллельных запросов
Для выполнения запроса Linq можно использовать `операторы запроса` или `методы расширения`.
`Запрос` это трансформация последовательности с помощью одного или нескольких операторов запроса или методов расширения в другую последовательность.

`Linq query`
```C#
var t = from name in Students
		where name.Contain("Pavel")
		orderby name select g;
```
Начинается выполнение выражения запроса с оператора `from` потом переменная элемента последовательности `in` последовательность и далее операторы изменяющий последовательность. В конце либо `select` либо `group`.

`Linq methods`
```C#
Students.Where(g=>g.Contain("Pavel")
		.OrderBy(g=g).Select(g=>g));
```
Для работы используеться лямбда выражения.

Еще одно достоинство Linq то что сокращаеться объем используемого кода, передавая работу компилятор по созданию if else,foreach, временные переменные и т.д

Для получения результата запроса лучше использовать КС `var` т.к. может быть множество возращаемых типов которые все в основном реализуют `IEnumerable`.

`Linq query` работает с помощью операторов запроса. Некторые операторы и методы(в linq method) выполняют работу в отложенном выполнении т.е. они не выполняют работу до тех пор пока к результату работы не будет обращения и только потом вычисляеться выражение запроса.
```C#
var result= from i in coll 
			where i<10 select g;
foreach(item in result)
```
Переменная `result` не будет вычисляться сразу сначала будет обращение к циклу foreach, а потом выполниться выражение запрос и вернеться с результатом назад в цикл. Это может быть полезно если между `result` и `foreach` есть какие то операции которые могут повлиять на результат
Чтобы выполнить код в немедленном исполнении
можно применить метод расширения.
```C#
var result= (from i in coll 
			where i<10 select g).ToList();
```
Типы выполнения операторов запроса и методов расширения:
![[Отложенное выполнение.png]]![[Отложенное выполнение(part2).png]]

Все методы расширенний и операторы запроса можно разделить по категориям:
- Соединяющие
- Агрегирующие
- Генерирующие
- Группирующие
- Квантифицирующие
- Преобразования
- Проекции
- Для работы с элементами
- Для работы с множествами
- Упорядочивания
- Фильтрации


